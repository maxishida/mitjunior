(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{1574:(e,r,s)=>{"use strict";s.d(r,{IG:()=>d,db:()=>l,j2:()=>i,yA:()=>n});var a=s(2078),t=s(2553),c=s(9708),o=s(9996);let n=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyDkojqSAUoRkSwZwzS2SkyPnwqfsWdQ1m4",authDomain:"mitjunior.firebaseapp.com",projectId:"mitjunior",storageBucket:"mitjunior.appspot.com",messagingSenderId:"206479062777",appId:"COLOQUE_SEU_APP_ID_AQUI"}),i=(0,t.xI)(n),l=(0,c.aU)(n),d=(0,o.c7)(n)},5778:(e,r,s)=>{Promise.resolve().then(s.bind(s,6691))},6691:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var a=s(5155),t=s(2115),c=s(2619),o=s.n(c),n=s(1574),i=s(9996),l=s(9708);function d(){let[e,r]=(0,t.useState)(""),[s,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1),[b,x]=(0,t.useState)([]);(0,t.useEffect)(()=>{if(!n.db)return;let e=(0,l.P)((0,l.rJ)(n.db,"courses"),(0,l.My)("createdAt","desc")),r=(0,l.aQ)(e,e=>{x(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>r()},[]);let j=async a=>{if(a.preventDefault(),!e||!s||!d)return void alert("Por favor, preencha todos os campos.");h(!0);try{let a=(0,i.KR)(n.IG,"covers/".concat(Date.now(),"_").concat(d.name));await (0,i.D)(a,d);let t=await (0,i.qk)(a);await (0,l.gS)((0,l.rJ)(n.db,"courses"),{title:e,description:s,coverURL:t,createdAt:new Date}),alert('Curso "'.concat(e,'" criado com sucesso!')),r(""),c(""),u(null),document.getElementById("cover").value=""}catch(e){console.error("Erro ao criar curso: ",e),alert("Ocorreu um erro ao criar o curso.")}finally{h(!1)}},p=async e=>{if(window.confirm('Tem certeza que deseja excluir o curso "'.concat(e.title,'"?')))try{await (0,l.kd)((0,l.H9)(n.db,"courses",e.id));let r=(0,i.KR)(n.IG,e.coverURL);await (0,i.XR)(r),alert("Curso exclu\xeddo com sucesso.")}catch(e){console.error("Erro ao excluir curso: ",e),alert("Ocorreu um erro ao excluir o curso.")}};return(0,a.jsxs)("div",{className:"bg-dark text-white min-vh-100",children:[(0,a.jsxs)("header",{className:"p-3 mb-4 border-bottom border-secondary d-flex justify-content-between align-items-center",children:[(0,a.jsx)("h1",{className:"h4",children:"Gerenciar Cursos"}),(0,a.jsx)(o(),{href:"/admin",className:"btn btn-secondary",children:"Voltar ao Painel"})]}),(0,a.jsxs)("main",{className:"container",children:[(0,a.jsxs)("div",{className:"card bg-secondary p-4 mb-5",children:[(0,a.jsx)("h2",{className:"h5 mb-4",children:"Criar Novo Curso"}),(0,a.jsx)("form",{onSubmit:j})]}),(0,a.jsxs)("div",{className:"card bg-secondary p-4",children:[(0,a.jsx)("h2",{className:"h5 mb-4",children:"Cursos Existentes"}),(0,a.jsx)("ul",{className:"list-group",children:b.map(e=>(0,a.jsxs)("li",{className:"list-group-item bg-dark text-white d-flex justify-content-between align-items-center",children:[e.title,(0,a.jsxs)("div",{children:[(0,a.jsx)(o(),{href:"/admin/courses/edit/".concat(e.id),className:"btn btn-primary btn-sm me-2",children:"Editar"}),(0,a.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>p(e),children:"Excluir"})]})]},e.id))})]})]})]})}}},e=>{e.O(0,[135,965,31,619,441,255,977],()=>e(e.s=5778)),_N_E=e.O()}]);