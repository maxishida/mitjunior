(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{724:(e,a,t)=>{Promise.resolve().then(t.bind(t,8395))},1574:(e,a,t)=>{"use strict";t.d(a,{IG:()=>l,db:()=>d,j2:()=>n,yA:()=>c});var s=t(2078),r=t(2553),o=t(9708),i=t(9996);let c=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyDkojqSAUoRkSwZwzS2SkyPnwqfsWdQ1m4",authDomain:"mitjunior.firebaseapp.com",projectId:"mitjunior",storageBucket:"mitjunior.appspot.com",messagingSenderId:"206479062777",appId:"COLOQUE_SEU_APP_ID_AQUI"}),n=(0,r.xI)(c),d=(0,o.aU)(c),l=(0,i.c7)(c)},8395:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(5155),r=t(2115),o=t(2619),i=t.n(o),c=t(1574),n=t(9996),d=t(9708);function l(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(""),[l,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(null),[b,p]=(0,r.useState)(""),[x,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{c.db&&a((await (0,d.GG)((0,d.rJ)(c.db,"courses"))).docs.map(e=>({id:e.id,title:e.data().title})))})()},[]),(0,r.useEffect)(()=>{if(!t)return void u([]);let e=(0,d.P)((0,d.rJ)(c.db,"courses/".concat(t,"/videos"))),a=(0,d.aQ)(e,e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[t]);let j=async e=>{if(e.preventDefault(),!t||!m||!b)return alert("Preencha todos os campos.");v(!0);try{let e=(0,n.KR)(c.IG,"videos/".concat(Date.now(),"_").concat(m.name));await (0,n.D)(e,m);let a=await (0,n.qk)(e);await (0,d.gS)((0,d.rJ)(c.db,"courses/".concat(t,"/videos")),{title:b,videoURL:a,createdAt:new Date}),alert('V\xeddeo "'.concat(b,'" adicionado!')),h(null),p(""),document.getElementById("video").value=""}catch(e){console.error("Erro ao adicionar v\xeddeo: ",e)}finally{v(!1)}},f=async e=>{if(window.confirm('Excluir o v\xeddeo "'.concat(e.title,'"?')))try{await (0,d.kd)((0,d.H9)(c.db,"courses/".concat(t,"/videos"),e.id));let a=(0,n.KR)(c.IG,e.videoURL);await (0,n.XR)(a),alert("V\xeddeo exclu\xeddo.")}catch(e){console.error("Erro ao excluir v\xeddeo: ",e)}};return(0,s.jsxs)("div",{className:"bg-dark text-white min-vh-100",children:[(0,s.jsxs)("header",{className:"p-3 mb-4 border-bottom border-secondary d-flex justify-content-between align-items-center",children:[(0,s.jsx)("h1",{className:"h4",children:"Gerenciar V\xeddeos"}),(0,s.jsx)(i(),{href:"/admin",className:"btn btn-secondary",children:"Voltar ao Painel"})]}),(0,s.jsxs)("main",{className:"container",children:[(0,s.jsxs)("div",{className:"card bg-secondary p-4 mb-4",children:[(0,s.jsx)("h2",{className:"h5 mb-4",children:"Adicionar Novo V\xeddeo"}),(0,s.jsx)("form",{onSubmit:j})]}),(0,s.jsxs)("div",{className:"card bg-secondary p-4",children:[(0,s.jsx)("h2",{className:"h5 mb-4",children:"V\xeddeos do Curso"}),(0,s.jsxs)("select",{className:"form-select mb-3",value:t,onChange:e=>o(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Escolha um curso para ver os v\xeddeos --"}),e.map(e=>(0,s.jsx)("option",{value:e.id,children:e.title},e.id))]}),t&&(0,s.jsxs)("ul",{className:"list-group",children:[l.map(e=>(0,s.jsxs)("li",{className:"list-group-item bg-dark text-white d-flex justify-content-between align-items-center",children:[e.title,(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>f(e),children:"Excluir"})]},e.id)),0===l.length&&(0,s.jsx)("li",{className:"list-group-item bg-dark text-white",children:"Nenhum v\xeddeo neste curso."})]})]})]})]})}}},e=>{e.O(0,[135,965,31,619,441,255,977],()=>e(e.s=724)),_N_E=e.O()}]);